group 'com.mikalai.gradle'
version '1.0-SNAPSHOT'

apply plugin: 'java'


repositories {
    mavenCentral()
}

task(hello) << {
    println "hello"
}

task simpleCopy(type: Copy) {
    from(file('src'))
    into(buildDir)
    description 'my desc for copy task'
}

task taskX << {
    println 'taskX'
}

task taskY << {
    println 'taskY'
}

taskX.dependsOn taskY


tasks.addRule("Pattern: ping<ID>") { String taskName ->
    if (taskName.startsWith("ping")) {
        task(taskName) << {
            println "Pinging: " + (taskName - 'ping')
        }
    }
}

task groupPing {
    dependsOn pingServer1, pingServer2
}

task work << {
    println 'work'

}
task closeResource << {
    println 'close resource'
}

work.finalizedBy closeResource